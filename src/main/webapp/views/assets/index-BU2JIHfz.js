import{f as $,d as I,u as S,c as j}from"./user-Bs3SM7pF.js";import{u as x}from"./index-7XaKpovQ.js";import{l as z}from"./lodash-BNYBvJY_.js";import{d as L,r as E,a as O,o as G,c as q,w as H,u as e,b as l,e as t,i as J,F as K,f as P,g as w,E as r,h as p,j as m,k as n,l as D,m as u,n as k,t as C,p as Q,q as A,s as v,v as W,x as X,y as Y,z as c}from"./index-CTdGs5XT.js";const Z={slot:"footer",class:"text-right"},oe=L({__name:"index",setup(ee){const U=E([]),{bool:b,toggle:i}=x(),V=O({}),f=()=>{$(V.username).then(d=>{U.value=d.list||[]})},h=d=>{var s;o.value=z.cloneDeep(d),g(),(s=_.value)==null||s.resetFields()},B=d=>{Y.confirm("确定删除吗？","提示",{type:"warning"}).then(()=>{i(),I(d).then(()=>{c.success("删除成功~"),f()}).finally(()=>i())}).catch(()=>{c.info("取消操作~")})},{bool:y,toggle:g}=x(),o=E({}),_=E(),F=()=>{var d;(d=_.value)==null||d.validate(s=>{s&&(o.value.id?T(o.value):M(o.value))})},T=d=>{i(),S(d).then(()=>{c.success("更新成功~"),g(),f()}).finally(()=>i())},M=d=>{i(),j(d).then(()=>{c.success("创建成功~"),g(),f()}).finally(()=>i())};return G(()=>{f()}),(d,s)=>{const N=P("loading");return w(),q(K,null,[H((w(),q("div",null,[l(e(D),{inline:""},{default:t(()=>[l(e(r),{prop:"username"},{default:t(()=>[l(e(p),{modelValue:V.username,"onUpdate:modelValue":s[0]||(s[0]=a=>V.username=a),placeholder:"用户名",clearable:""},null,8,["modelValue"])]),_:1}),l(e(r),null,{default:t(()=>[l(e(m),{type:"primary",onClick:f},{default:t(()=>[n("查询")]),_:1}),l(e(m),{type:"success",onClick:s[1]||(s[1]=a=>h({}))},{default:t(()=>[n("新增")]),_:1})]),_:1})]),_:1}),l(e(Q),{data:U.value,border:""},{default:t(()=>[l(e(u),{prop:"username",label:"用户名",align:"center"}),l(e(u),{prop:"password",label:"密码",align:"center"},{default:t(()=>[n("******")]),_:1}),l(e(u),{prop:"phone",label:"手机号",align:"center"}),l(e(u),{prop:"email",label:"邮箱",align:"center"}),l(e(u),{prop:"address",label:"住址",align:"center"}),l(e(u),{prop:"gender",label:"性别",align:"center"},{default:t(({row:a})=>[l(e(k),{type:a.gender===1?"primary":"danger"},{default:t(()=>[n(C(a.gender===1?"男":"女"),1)]),_:2},1032,["type"])]),_:1}),l(e(u),{prop:"status",label:"状态",align:"center"},{default:t(({row:a})=>[l(e(k),{type:a.status===1?"success":"danger"},{default:t(()=>[n(C(a.status===1?"正常":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(e(u),{prop:"isAdmin",label:"管理员",align:"center"},{default:t(({row:a})=>[l(e(k),{type:a.isAdmin===1?"success":"danger"},{default:t(()=>[n(C(a.isAdmin===1?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(e(u),{prop:"createdAt",label:"创建时间",align:"center"}),l(e(u),{prop:"updatedAt",label:"更新时间",align:"center"}),l(e(u),{prop:"action",label:"操作",align:"center","min-width":"120px"},{default:t(({row:a})=>[l(e(m),{type:"primary",link:"",onClick:R=>h(a)},{default:t(()=>[n("编辑")]),_:2},1032,["onClick"]),l(e(m),{type:"danger",link:"",onClick:R=>B(a.id)},{default:t(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])),[[N,e(b)]]),l(e(X),{modelValue:e(y),"onUpdate:modelValue":s[9]||(s[9]=a=>J(y)?y.value=a:null),title:o.value.id?"编辑用户":"添加用户",width:"30%"},{default:t(()=>[l(e(D),{ref_key:"formRef",ref:_,model:o.value,"label-position":"top"},{default:t(()=>[l(e(r),{prop:"username",label:"用户名",rules:[{required:!0,message:"请输入用户名"}]},{default:t(()=>[l(e(p),{modelValue:o.value.username,"onUpdate:modelValue":s[2]||(s[2]=a=>o.value.username=a),disabled:!!o.value.id,placeholder:"请输入用户名"},null,8,["modelValue","disabled"])]),_:1}),l(e(r),{prop:"password",label:"密码",rules:[{required:!0,message:"请输入密码"}]},{default:t(()=>[l(e(p),{modelValue:o.value.password,"onUpdate:modelValue":s[3]||(s[3]=a=>o.value.password=a),type:"password",disabled:!!o.value.id,placeholder:"请输入密码"},null,8,["modelValue","disabled"])]),_:1}),l(e(r),{prop:"phone",label:"手机号",rules:[{required:!0,message:"请输入手机号"}]},{default:t(()=>[l(e(p),{modelValue:o.value.phone,"onUpdate:modelValue":s[4]||(s[4]=a=>o.value.phone=a),placeholder:"请输入手机号",maxlength:11},null,8,["modelValue"])]),_:1}),l(e(r),{prop:"email",label:"邮箱",rules:[{required:!0,type:"email",message:"请输入邮箱"}]},{default:t(()=>[l(e(p),{modelValue:o.value.email,"onUpdate:modelValue":s[5]||(s[5]=a=>o.value.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(e(r),{prop:"gender",label:"性别",rules:[{required:!0,type:"number",message:"请选择性别"}]},{default:t(()=>[l(e(A),{modelValue:o.value.gender,"onUpdate:modelValue":s[6]||(s[6]=a=>o.value.gender=a),placeholder:"请选择性别"},{default:t(()=>[l(e(v),{label:"男",value:1}),l(e(v),{label:"女",value:0})]),_:1},8,["modelValue"])]),_:1}),l(e(r),{prop:"address",label:"住址"},{default:t(()=>[l(e(p),{modelValue:o.value.address,"onUpdate:modelValue":s[7]||(s[7]=a=>o.value.address=a),placeholder:"请输入住址"},null,8,["modelValue"])]),_:1}),l(e(r),{prop:"status",label:"状态"},{default:t(()=>[l(e(A),{modelValue:o.value.status,"onUpdate:modelValue":s[8]||(s[8]=a=>o.value.status=a),placeholder:"请选择状态"},{default:t(()=>[l(e(v),{label:"正常",value:1}),l(e(v),{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),W("div",Z,[l(e(m),{loading:e(b),onClick:e(g)},{default:t(()=>[n("取 消")]),_:1},8,["loading","onClick"]),l(e(m),{loading:e(b),type:"primary",onClick:F},{default:t(()=>[n("确 定")]),_:1},8,["loading"])])]),_:1},8,["modelValue","title"])],64)}}});export{oe as default};
