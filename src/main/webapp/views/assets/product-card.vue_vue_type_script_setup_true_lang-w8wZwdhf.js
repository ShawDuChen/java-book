import{I as u,d as E,a as V,f as B,w as r,u as e,g as h,D as v,e as n,v as a,t as d,W as N,b as l,U as x,Q as p,X as D,H as I,Y as T,j as y,Z as A,k as i,n as _,R as S,M as U,N as M,z as j}from"./index-CTdGs5XT.js";import{u as q}from"./index-7XaKpovQ.js";const Y=s=>u({url:"/cart/all",method:"get",params:{userId:s}}),F=s=>u({url:"/cart/create",method:"post",data:{model:s}}),Z=s=>u({url:"/cart/update",method:"post",data:{model:s}}),G=s=>u({url:"/cart/delete",method:"get",params:{id:s}}),H={class:"flex-between"},Q={style:{"font-size":"20px","font-weight":"bold"}},R={class:"flex-between",style:{"margin-top":"6px"}},J=E({__name:"product-card",props:{data:{},onlyshow:{type:Boolean}},setup(s){const C=s,{bool:w,toggle:m}=q(),t=V({count:1,edit:!1}),k=()=>{t.edit=!0,t.count=1},f=()=>{t.edit=!1,t.count=1},b=async()=>{m(),await F({productId:C.data.id,userId:M().id,count:t.count}).finally(()=>m()),j.success("添加成功"),f()};return(o,g)=>{const z=B("loading");return r((h(),v(e(U),null,{header:n(()=>[a("div",H,[a("span",Q,d(o.data.name),1),o.onlyshow?D("",!0):r((h(),v(e(N),{key:0,color:"#f56c6c",size:20,class:"pointer",onClick:k},{default:n(()=>[l(e(x))]),_:1},512)),[[p,!t.edit]])]),r(a("div",R,[a("div",null,[l(e(I),{modelValue:t.count,"onUpdate:modelValue":g[0]||(g[0]=c=>t.count=c),size:"small",min:1,max:999},null,8,["modelValue"])]),a("div",null,[l(e(y),{type:"danger",circle:"",icon:e(T),size:"small",onClick:f},null,8,["icon"]),l(e(y),{type:"success",circle:"",icon:e(A),size:"small",onClick:b},null,8,["icon"])])],512),[[p,t.edit]])]),default:n(()=>[l(e(S),{direction:"vertical",alignment:"start"},{default:n(()=>{var c;return[a("div",null,"商品描述: "+d(o.data.description),1),a("div",null,"商品分类: "+d(((c=o.data.category)==null?void 0:c.name)||"-"),1),a("div",null,[i(" 商品销量: "),l(e(_),{type:"success"},{default:n(()=>[i(d(o.data.sellCount||0),1)]),_:1})]),a("div",null,[i("商品单价: "),l(e(_),{type:"danger"},{default:n(()=>[i("￥"+d(o.data.price||0),1)]),_:1})])]}),_:1}),r(a("div",{class:"text-right",style:{"font-size":"24px",color:"#f56c6c"}},"￥"+d((o.data.price*t.count).toFixed(2)),513),[[p,t.edit]])]),_:1})),[[z,e(w)]])}}});export{J as _,G as d,Y as f,Z as u};
