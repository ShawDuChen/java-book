import{f as L}from"./shopOrder-D9heZ3cw.js";import{u as T}from"./index-7XaKpovQ.js";import{d as E,r as x,a as F,o as N,w as U,u as l,c as y,b as e,e as a,G as $,B as r,f as q,g as _,F as G,C as M,k as p,m as n,t as m,p as R,D as S}from"./index-CTdGs5XT.js";import{_ as j}from"./order-product.vue_vue_type_script_setup_true_lang-BpJMIMM9.js";import{f as z}from"./user-Bs3SM7pF.js";const W=E({__name:"index",setup(H){const f=x([]),{bool:k}=T(),g=()=>{L(u.userId).then(o=>{f.value=o.list||[]})},w=o=>{var s;return((s=o.carts)==null?void 0:s.reduce((d,i)=>{var c;return d+=d+(((c=i.product)==null?void 0:c.price)||0)*i.count,d},0))??0},b=x([]),C=()=>{z().then(o=>{b.value=o.list||[]})},u=F({}),D=$(),I=o=>{D.push({name:"productDetail",params:{id:o.id}})};return N(()=>{C(),g()}),(o,s)=>{const d=r("el-option"),i=r("el-select"),c=r("el-form-item"),B=r("el-button"),V=r("el-form"),h=r("el-tag"),A=q("loading");return U((_(),y("div",null,[e(V,{model:u,inline:!0},{default:a(()=>[e(c,{prop:"userId"},{default:a(()=>[e(i,{modelValue:u.userId,"onUpdate:modelValue":s[0]||(s[0]=t=>u.userId=t),placeholder:"下单用户",clearable:"",filterable:"",style:{width:"120px"}},{default:a(()=>[(_(!0),y(G,null,M(b.value,t=>(_(),S(d,{key:t.id,value:t.id,label:t.username},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(B,{type:"primary",onClick:g},{default:a(()=>[p("查询")]),_:1})]),_:1})]),_:1},8,["model"]),e(l(R),{data:f.value,border:""},{default:a(()=>[e(l(n),{prop:"id",label:"订单ID",align:"center",width:"80px"}),e(l(n),{prop:"userId",label:"下单用户",align:"center"},{default:a(({row:t})=>{var v;return[p(m((v=t.user)==null?void 0:v.username),1)]}),_:1}),e(l(n),{prop:"carts",label:"购买商品",align:"center"},{default:a(({row:t})=>[e(l(j),{data:t.carts,onCheck:I},null,8,["data"])]),_:1}),e(l(n),{prop:"total",label:"总价",align:"center",width:"120px"},{default:a(({row:t})=>[e(h,{type:"danger"},{default:a(()=>[p("￥"+m(w(t)),1)]),_:2},1024)]),_:1}),e(l(n),{prop:"paid",label:"已付款",align:"center",width:"80px"},{default:a(({row:t})=>[e(h,{type:t.paid?"success":"danger"},{default:a(()=>[p(m(t.paid?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),e(l(n),{prop:"createdAt",label:"下单时间",align:"center",width:"180px"}),e(l(n),{prop:"updatedAt",label:"订单更新时间",align:"center",width:"180px"})]),_:1},8,["data"])])),[[A,l(k)]])}}});export{W as default};
