import{g as x}from"./product-C__u8Dff.js";import{u as B}from"./index-7XaKpovQ.js";import{I as C,d as R,r as f,o as k,w as y,u as e,c as A,b as a,e as l,J as D,f as N,g as T,v as _,t,K as h,L as r,k as o,p as b,m as d,M as V}from"./index-CTdGs5XT.js";const M=p=>C({url:"/comment/productComments",method:"get",params:{productId:p}}),P=p=>C({url:"/rating/productRatings",method:"get",params:{productId:p}}),K=R({__name:"detail",setup(p){const{bool:E,toggle:v}=B(),s=f({}),i=f([]),g=f([]),I=D();return k(()=>{v();const m=parseInt(`${I.params.id}`);Promise.all([x(m).then(u=>{s.value=u.data}),M(m).then(u=>{i.value=u.list||[]}),P(m).then(u=>{g.value=u.list||[]})]).finally(()=>v())}),(m,u)=>{const w=N("loading");return y((T(),A("div",null,[a(e(V),null,{header:l(()=>[_("h1",null,t(s.value.name+`(${s.value.code})`),1)]),default:l(()=>[a(e(h),{gutter:20},{default:l(()=>[a(e(r),{span:24,md:12,lg:8,class:"lh-12"},{default:l(()=>[o(" 单价：￥"+t(s.value.price),1)]),_:1}),a(e(r),{span:24,md:12,lg:8,class:"lh-12"},{default:l(()=>[o(" 描述："+t(s.value.description),1)]),_:1}),a(e(r),{span:24,md:12,lg:8,class:"lh-12"},{default:l(()=>{var n;return[o(" 所属类别："+t((n=s.value.category)==null?void 0:n.name),1)]}),_:1}),a(e(r),{span:24,md:12,lg:8,class:"lh-12"},{default:l(()=>[o(" 销量："+t(s.value.sellCount),1)]),_:1}),a(e(r),{span:24,md:12,lg:8,class:"lh-12"},{default:l(()=>[o(" 评分："+t(s.value.score),1)]),_:1}),a(e(r),{span:24,md:12,lg:8,class:"lh-12"},{default:l(()=>[o(" 上架时间："+t(s.value.createdAt),1)]),_:1})]),_:1}),a(e(h),{gutter:20},{default:l(()=>[a(e(r),{span:24,lg:12},{default:l(()=>[_("h3",null,"商品评论("+t(i.value.length)+")",1),a(e(b),{data:i.value,border:""},{default:l(()=>[a(e(d),{prop:"content",label:"评论内容"}),a(e(d),{prop:"userId",label:"评论人"},{default:l(({row:n})=>{var c;return[o(t((c=n.user)==null?void 0:c.username),1)]}),_:1}),a(e(d),{prop:"createdAt",label:"评论时间"})]),_:1},8,["data"])]),_:1}),a(e(r),{span:24,lg:12},{default:l(()=>[_("h3",null,"商品评分("+t(g.value.length)+")",1),a(e(b),{data:g.value,border:""},{default:l(()=>[a(e(d),{prop:"score",label:"评分"}),a(e(d),{prop:"userId",label:"评分人"},{default:l(({row:n})=>{var c;return[o(t((c=n.user)==null?void 0:c.username),1)]}),_:1}),a(e(d),{prop:"createdAt",label:"评分时间"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])),[[w,e(E)]])}}});export{K as default};
