import{l as g}from"./auth-BFN8cO7y.js";import{d as h,a as _,a0 as k,o as U,a1 as C,c as R,e,f as o,O as B,C as s,h as N,l as u,x as q,u as c,a2 as f,a3 as L,a4 as T}from"./index-a7oZ5LST.js";const D={class:"container flex-center"},E={class:"flex-between"},j=h({__name:"index",setup(M){const p=_(),a=_({username:"",password:"",type:"admin"}),i=B(),v=k(),V=()=>{var d;(d=p.value)==null||d.validate(t=>{if(t){const r=a.value;g(r,r.type).then(l=>{v.updateUser(l.data),L(l.token),T(l.data),i.push(r.type==="admin"?"/user":"/c/dashboard")})}})};return U(()=>{C()}),(d,t)=>{const r=s("el-input"),l=s("el-form-item"),m=s("el-radio"),y=s("el-radio-group"),b=s("el-button"),w=s("el-form"),x=s("el-card");return N(),R("div",D,[e(x,{header:"购物系统登录",style:{width:"420px"}},{default:o(()=>[e(w,{ref_key:"formRef",ref:p,model:a.value,"label-position":"top"},{default:o(()=>[e(l,{prop:"username",label:"用户名",rules:[{required:!0,message:"请输入用户名"}]},{default:o(()=>[e(r,{modelValue:a.value.username,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.username=n),placeholder:"请输入用户名",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),e(l,{prop:"password",label:"用户密码",rules:[{required:!0,message:"请输入用户密码"}]},{default:o(()=>[e(r,{modelValue:a.value.password,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.password=n),type:"password",placeholder:"请输入用户密码",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),e(l,{prop:"type",label:"登录平台"},{default:o(()=>[e(y,{modelValue:a.value.type,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.type=n)},{default:o(()=>[e(m,{value:"admin"},{default:o(()=>[u("管理后台")]),_:1}),e(m,{value:"client"},{default:o(()=>[u("购物平台")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(l,null,{default:o(()=>[e(b,{type:"primary",class:"w-full",onClick:V},{default:o(()=>[u("登录")]),_:1})]),_:1}),q("div",E,[e(c(f),{to:"/forgot"},{default:o(()=>[u("忘记密码？")]),_:1}),e(c(f),{to:"/register"},{default:o(()=>[u("注册账号")]),_:1})])]),_:1},8,["model"])]),_:1})])}}});export{j as default};
